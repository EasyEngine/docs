---
ID: 13626
post_title: >
  Checklist For Perfect WordPress-Nginx
  Setup
author: Rahul Bansal
post_excerpt: "Checklist to verify wordpress plugin cache, browser cache, gzip compression & nginx's map directive to get maximum performance out of WordPress."
layout: page
permalink: >
  https://easyengine.io/wordpress-nginx/tutorials/checklist/
published: true
post_date: 2012-09-12 01:07:51
---
<a href="https://easyengine.io/wp-content/uploads/2012/09/wordpress-nginx.jpeg"><img class="alignright size-full wp-image-10804" title="wordpress-nginx" alt="" src="https://easyengine.io/wp-content/uploads/2012/09/wordpress-nginx.jpeg" width="220" height="91" /></a>Today's article details an internal checklist we will follow when testing if a WordPress-Nginx setup is working perfectly.

Following tests are most common &amp; important:
<ul>
	<li>Testing WordPress content cache for PHP/MySQL crash</li>
	<li>Testing Browser cache for static files</li>
	<li>Testing Gzip Compression</li>
	<li>Testing Nginx Map{} for Multisite Files</li>
</ul>
<h3>Testing WordPress content cache for PHP/MySQL crash</h3>
An ideal WordPress-Nginx setup will utilize caching at multiple levels. Most common way of caching is done by WordPress plugins like <a title="WordPress-Nginx + W3 Total Cache" href="https://easyengine.io/tutorials/wordpress-nginx-w3-total-cache/">W3 Total Cache</a> and <a title="WordPress-Nginx + WP Super cache" href="https://easyengine.io/tutorials/wordpress-wp-super-cache-nginx/">WP Super Cache</a> or using <a href="https://easyengine.io/wordpress-nginx/tutorials/single-site/fastcgi-cache-with-purging/">Nginx's fastcgi cache</a>.
<h3>Test if your caching solution is working:</h3>
<p class="rtp-success">If you are using Nginx's fastcgi-cache, use this <a href="https://easyengine.io/wordpress-nginx/tutorials/nginx/upstream-cache-status-in-response-header/">alternative method</a>.</p>
Please run following command for at least 2 posts minimum and 2-3 times on each post. If you are testing a <a title="Creating A WordPress Multisite Network with Nginx" href="https://easyengine.io/tutorials/creating-wordpress-multisite-network-nginx/">Multisite setup</a>, you must repeat everything for at least 2 different sites in network.

<strong>Command to run:</strong>
<pre>curl http://example.com/wordpress-post-url/ | tail -n 4 &amp;&amp; echo -e</pre>
You should get the following output:
<pre>&lt;/html&gt;
&lt;!-- Dynamic page generated in 0.050 seconds. --&gt;
&lt;!-- Cached page generated by WP-Super-Cache on 2012-09-14 <strong>04:52:06</strong> --&gt;
&lt;!-- super cache --&gt;</pre>
Please note the timestamp (highlighted in <strong>bold</strong> above).

If it remains the same after running command many times, your cache is working.
<h4>Test if Content Cache works after PHP crashes</h4>
You should run above test again after stopping PHP. <code>service php5-fpm stop</code>

If your cache is not working, you will get <em><strong>"bad gateway error" </strong></em>after PHP stops.
<h3>Testing Browser cache for static files</h3>
Browser caching must be done on Nginx's end.

Take any file on your server and run command like below:

<strong>Command to run:</strong>
<pre>curl -I http://example.com/wp-content/uploads/2012/09/wow.png</pre>
<div></div>
<div>You will see output like below:</div>
<div>
<pre class="prettyprint">HTTP/1.1 200 OK
Server: nginx/1.2.3
Date: Wed, 19 Sep 2012 19:32:14 GMT
Content-Type: image/png
Content-Length: 3035
Last-Modified: Thu, 06 Sep 2012 15:14:25 GMT
Connection: keep-alive
<strong>Expires: Thu, 31 Dec 2037 23:55:55 GMT Cache-Control: max-age=315360000</strong>
Accept-Ranges: bytes</pre>
</div>
If you see lines in bold with future date, then it means browser cache is working. This will reduce load on server for repeat visitors!
<h3>Testing Gzip Compression:</h3>
Gzip support is by default enabled/handled by Nginx so we need not add config lines for it again. For this reason, none of my Nginx configuration have gzip block.

In case you are not sure, you can test if your site is using gzip by following this - <a href="https://easyengine.io/wordpress-nginx/tutorials/nginx/enable-gzip/">http://rtcamp.com/wordpress-nginx/tutorials/nginx/enable-gzip/</a>

Make sure you enable gzip for HTML, CSS &amp; Javascript output atleast.
<h3>Testing Nginx Map{} for Multisite Files</h3>
If you are following our WordPress-Nginx series, then you must be using <a title="Nginx maps + WordPress-Multisite + Static Files Handling" href="https://easyengine.io/tutorials/nginx-maps-wordpress-multisite-static-files-handling/">Nginx Maps{} directive on your WordPress Multisite setup</a>.

In that case, you must check if static file uploads on Multisite can be accessed when PHP crashed.

Just stop PHP, and run following command.
<pre>curl -I http://example.com/wp-content/uploads/2012/09/wow.png</pre>
<div>If output contains
<pre>HTTP/1.1 200 OK</pre>
</div>
That means, you can access files without PHP.

For added safety, clear browser cache and open file URL in browser.